---
title: 开发指南
description: AI 聊天启动器的开发工作流程和最佳实践
---

# 开发指南

AI 聊天启动器的开发工作流程和最佳实践。

## 命令

### 全局命令

```bash
pnpm install     # 安装依赖
pnpm dev         # 启动所有开发服务器
pnpm build       # 构建所有包
pnpm test        # 运行所有测试
pnpm lint        # 检查代码规范
pnpm format      # 格式化代码
```

### 包特定命令

```bash
pnpm dev:web     # Web 应用
pnpm dev:docs    # 文档站点
pnpm build:web   # 构建 Web 应用
pnpm build:docs  # 构建文档
pnpm test:watch  # 监视模式测试
```

## 添加组件

### UI 组件

在 `packages/ui/src/components/` 中创建:

```tsx
// packages/ui/src/components/my-component.tsx
import React from 'react';

interface MyComponentProps {
  title: string;
}

export function MyComponent({ title }: MyComponentProps): React.ReactElement {
  return <div>{title}</div>;
}
```

从 `packages/ui/src/index.ts` 导出:

```typescript
export { MyComponent } from './components/my-component';
```

### 聊天组件

位于 `packages/ui/src/components/chat/`:

- `chat-container.tsx` - 主要布局
- `chat-input.tsx` - 消息输入
- `chat-messages.tsx` - 消息显示
- `message-bubble.tsx` - 单个消息

## 类型定义

集中在 `packages/types/src/`:

```typescript
export interface Message {
  id: string;
  content: string;
  role: 'user' | 'assistant';
  timestamp: Date | string;
}
```

## 测试

```bash
# 运行测试
pnpm test

# 监视模式
pnpm test:watch

# 特定包
cd packages/ui && pnpm test
```

测试示例:

```typescript
import { render, screen } from '@testing-library/react';
import { Button } from './button';

describe('Button', () => {
  it('renders correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByRole('button')).toHaveTextContent('Click me');
  });
});
```

## 代码质量

预提交钩子自动:
- 使用 Prettier 格式化
- 修复 ESLint 问题
- 运行类型检查

```bash
pnpm lint        # 检查代码规范
pnpm lint:fix    # 修复问题
pnpm format      # 格式化代码
```

## 环境变量

创建 `apps/web/.env.local`:

```bash
OPENAI_API_KEY=your_key_here
ANTHROPIC_API_KEY=your_key_here
NODE_ENV=development
```

## 热重载

- **Web 应用**: React 组件热重载
- **UI 包**: 更改立即反映在 Web 应用中
- **类型包**: 需要重启
- **文档**: MDX 内容热重载

## VS Code 扩展

推荐:
- TypeScript and JavaScript Language Features
- ESLint
- Prettier
- Tailwind CSS IntelliSense

## 包分析

```bash
cd apps/web
pnpm build
npx @next/bundle-analyzer
```

## 下一步

- [部署指南](/docs/zh-deployment)
- [API 参考](/docs/zh-api)